<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Live LA Building Permits · CSV & Alerts | PermitPulse</title>
  <meta name="description" content="Win bids by being early. LADBS permits filtered by value & keywords. Export CSVs and get instant email alerts." />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0S8S6156CV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-0S8S6156CV');
    function fireGAEvent(name, params){ try{ gtag('event', name, params||{});}catch(_){ } }
    document.addEventListener('DOMContentLoaded', ()=>{ fireGAEvent('view_results'); });
  </script>

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_US">
  <meta property="og:locale:alternate" content="es_US">
  <meta property="og:title" content="PermitPulse — Live LADBS Permits">
  <meta property="og:description" content="Export CSVs, get daily alerts, and filter by big values. Be first on every bid.">
  <meta property="og:url" content="https://getpermitpulse.com/">
  <meta property="og:image" content="https://getpermitpulse.com/img/og/permitpulse-og-live-ladbs-permits-los-angeles-1200x630-2025-10.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="LA skyline with mountains and a heartbeat pulse over a blueprint grid — PermitPulse">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://getpermitpulse.com/img/og/permitpulse-og-live-ladbs-permits-los-angeles-1200x630-2025-10.png">

  <!-- Product JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "name":"PermitPulse (LADBS live permits)",
    "description":"Live LADBS permits filtered by value & keywords. Export CSVs and get instant alerts.",
    "brand":{"@type":"Brand","name":"PermitPulse"},
    "url":"https://getpermitpulse.com/",
    "offers":[
      {"@type":"Offer","price":"0","priceCurrency":"USD","name":"Free"},
      {"@type":"Offer","price":"39","priceCurrency":"USD","name":"Pro Monthly"}
    ],
    "aggregateRating":{"@type":"AggregateRating","ratingValue":"4.8","reviewCount":"5"}
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900 p-4">

<!-- HERO -->
<header class="mb-8">
  <div class="max-w-6xl mx-auto p-4 sm:p-8 rounded-3xl border border-blue-100 bg-gradient-to-r from-sky-50 to-blue-50 shadow-sm">
    <div class="flex items-start justify-between gap-6">
      <div>
        <h1 class="text-3xl sm:text-4xl font-bold">Beat competitors to LA’s biggest permits.</h1>
        <p class="mt-2 max-w-2xl text-gray-700">
          Live LADBS feed + weekly “Big 10” digest. Free CSV today. Pro is <b>$39/mo</b>.
        </p>
        <div class="mt-3 flex flex-wrap gap-2">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm border border-blue-200 bg-white">Live from LADBS</span>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm border border-blue-200 bg-white">CSV & Email Alerts</span>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm border border-blue-200 bg-white">LLM-ready JSON</span>
        </div>
        <div class="mt-6 flex flex-wrap gap-3">
          <a data-cta="free_csv" href="#" onclick="openCSV(); fireGAEvent('cta_click',{cta:'hero_free_csv'})" class="inline-flex items-center justify-center px-5 py-3 rounded-xl bg-blue-600 text-white font-semibold">Get Free CSV Now</a>
          <a href="#live" class="inline-flex items-center justify-center px-5 py-3 rounded-xl border border-slate-300 bg-white font-semibold">See Live Permits</a>
          <a href="/email-alerts.html" class="inline-flex items-center justify-center px-5 py-3 rounded-xl border border-slate-300 bg-white font-semibold">Create Alerts</a>
        </div>
        <p class="mt-2 text-xs text-slate-500">Data source: LADBS • Updated hourly • No spam, unsubscribe anytime</p>
      </div>
      <div id="lang-toggle" class="text-sm text-right text-gray-600 min-w-[120px]"></div>
    </div>
  </div>
</header>

<!-- INTERNAL LINKS (unchanged) -->
<section id="la-feeds" class="max-w-6xl mx-auto px-4 sm:px-6">
  <h2 class="text-2xl font-bold mb-4">Los Angeles Permit Feeds</h2>
  <div class="grid sm:grid-cols-2 gap-3 mb-6">
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-solar-permits.html">Solar →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-roofing-permits.html">Roofing →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-adu-permits.html">ADU →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-new-construction-permits.html">New Construction →</a>
  </div>
  <h3 class="text-lg font-semibold mb-2">Neighborhoods</h3>
  <div class="grid sm:grid-cols-2 gap-3">
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-downtown-permits.html">Downtown LA →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-hollywood-permits.html">Hollywood →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-sfv-permits.html">San Fernando Valley →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-westside-permits.html">Westside →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-eastside-permits.html">Eastside →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-south-bay-permits.html">South Bay →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-san-pedro-permits.html">San Pedro &amp; Harbor →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-south-la-permits.html">South LA →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-san-fernando-city-permits.html">San Fernando (City) →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-west-sfv-permits.html">West SFV (Woodland Hills &amp; Encino) →</a>
    <a class="block p-4 rounded-xl border bg-white hover:bg-sky-50" href="/los-angeles-harbor-city-lomita-permits.html">Harbor City &amp; Lomita →</a>
  </div>
  <div class="mt-6 mb-10">
    <a class="underline" href="/free-csv.html" onclick="gtag('event','download_csv_nav',{page:'home_en'})">Download a free sample CSV</a>
  </div>
</section>

<!-- LIVE SAMPLE TABLE -->
<section id="live" class="max-w-6xl mx-auto px-4 sm:px-6 mt-10">
  <h3 class="text-lg font-bold">This week’s biggest permits (sample)</h3>
  <div id="tbl" class="mt-3 text-sm border rounded-xl overflow-x-auto"></div>
  <button onclick="openCSV(); fireGAEvent('cta_click',{cta:'sample_csv'})" class="w-full mt-3 rounded-xl border px-3 py-2">
    Download full CSV (free)
  </button>
</section>

<!-- TOP PERMITS LAST MONTH -->
<section id="top-permits" class="max-w-6xl mx-auto px-4 sm:px-6 mt-10">
  <h3 class="text-lg font-bold">Last Month’s Top Permits (≥ $250k)</h3>
  <div id="topList" class="mt-3 grid gap-3"></div>
  <button onclick="openCSV(); fireGAEvent('cta_click',{cta:'top_month_csv'})" class="w-full rounded-xl border px-3 py-2 mt-2">
    Get Full CSV Free
  </button>
</section>

<!-- PRICING (unchanged below) -->
<section id="pricing" class="bg-white border-t border-slate-200 mt-10">
  <!-- … existing pricing block unchanged … -->
  <!-- keep your entire pricing section exactly as before -->
</section>

<!-- Mobile sticky CTA -->
<a href="/free-csv.html" id="pp-fab"
   class="fixed bottom-4 right-4 z-40 shadow-lg rounded-full bg-emerald-600 text-white px-5 py-3 text-sm font-semibold md:hidden">
  Get Free CSV
</a>

<!-- ===== Scripts ===== -->
<script>
  // helper
  function ppEvent(name, params){ try { gtag('event', name, params || {}); } catch(_){} }

  // sample table
  (async()=>{
    try{
      const r = await fetch('/permits?sample=10&min_value=250000');
      const rows = await r.json();
      const cols = ['permit','address','project_value','issue_date','description'];
      const head = '<tr>'+cols.map(c=>`<th class="p-2 text-left">${c}</th>`).join('')+'</tr>';
      const body = rows.map(x=>'<tr>'+cols.map(c=>`<td class="p-2 align-top">${(x[c]??'')}</td>`).join('')+'</tr>').join('');
      document.getElementById('tbl').innerHTML = `<table class="w-full">${head}${body}</table>`;
    }catch(_){}
  })();

  // top permits last month
  (async()=>{
    try{
      const r = await fetch('/top-permits?limit=3&min_value=250000');
      const items = await r.json();
      if(!items.length){ document.getElementById('top-permits').style.display='none'; return; }
      const fmt = n => n?.toLocaleString?.('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0}) ?? n;
      const html = items.map(x=>`
        <article class="border rounded-xl p-3">
          <div class="text-base font-semibold">${fmt(+x.project_value||0)}</div>
          <div class="text-sm text-slate-700">${x.address||'—'}</div>
          <div class="text-xs text-slate-500">${x.type||''} • ${x.issue_date?.slice(0,10)||''}</div>
          <p class="text-sm mt-1 line-clamp-2">${x.description||''}</p>
        </article>`).join('');
      document.getElementById('topList').innerHTML = html;
      fireGAEvent('widget_view',{widget:'top_permits'});
    }catch(_){}
  })();
</script>

<!-- Pricing events (keep your existing listeners if present) -->
<script>
  // example: keep your previous pricing listeners if you had them
</script>

<!-- Free CSV Modal -->
<div id="csvModal" class="fixed inset-0 hidden items-end sm:items-center justify-center bg-black/50 z-50">
  <div class="w-full sm:w-[28rem] rounded-2xl bg-white p-5">
    <h3 class="text-xl font-bold mb-1">Free CSV: Last 7 Days (≥ $250k)</h3>
    <p class="text-sm text-slate-600 mb-4">We’ll email the CSV + a weekly “Big 10” digest. No account needed.</p>
    <form id="csvForm" class="space-y-3">
      <input type="email" name="email" required placeholder="you@email.com" class="w-full border rounded-xl px-3 py-2" />
      <input type="text" name="keywords" placeholder="Optional: roofing, solar, ADU…" class="w-full border rounded-xl px-3 py-2" />
      <button class="w-full rounded-xl px-3 py-2 bg-indigo-600 text-white font-semibold" id="csvSubmit">Email me the CSV</button>
      <p id="csvMsg" class="text-sm text-emerald-600 hidden">Got it — your CSV is downloading.</p>
    </form>
  </div>
</div>

<script>
function openCSV(){ document.getElementById('csvModal').classList.remove('hidden'); }
function closeCSV(){ document.getElementById('csvModal').classList.add('hidden'); }
document.getElementById('csvForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target).entries());
  try {
    gtag('event','lead_captured',{method:'free_csv_modal'});
    const r = await fetch('/free-csv', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify(data)
    });
    if(!r.ok) throw new Error('Bad response');
    const blob = await r.blob();
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'permitpulse_la_last7days.csv';
    document.body.appendChild(link); link.click(); link.remove();
    document.getElementById('csvMsg').classList.remove('hidden');
  } catch(err){ alert('Hmm, something went wrong. Try again?'); }
});
</script>

<!-- Language toggle & live counter (keep your existing snippets if you like) -->
<script>
(function(){
  var el = document.getElementById('lang-toggle');
  if (!el) return;
  var path = location.pathname;
  var isEs = path.indexOf('/es/') === 0 || /\/es\/?$/.test(path);
  var base = isEs ? path.replace(/^\/es\//,'/') : path;
  if (base === '/' || base === '') base = '/index.html';
  var counterpart = '/es' + (base === '/index.html' ? '/index.html' : base);
  el.innerHTML = isEs
    ? '<a class="underline" href="'+base+'">English</a> | <span>Español</span>'
    : '<span>English</span> | <a class="underline" href="'+counterpart+'">Español</a>';
})();
</script>

</body>
</html>
